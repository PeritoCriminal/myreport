<!-- myreportapp/image_editor.html -->


{% extends 'base.html' %}

{% load static %}

{% block center_content %}
<div class="toolbar">
    <input type="file" id="fileInput" accept="image/*" style="display: none;">
    <button id="newImageBtn" title="Nova Imagem">
        <i class="fas fa-image"></i>
        <span>Nova Imagem</span>
    </button>
    <button id="rotateClockwiseBtn" title="Rotacionar Hor치rio">
        <i class="fas fa-redo"></i>
        <span>Rotacionar Hor치rio</span>
    </button>
    <button id="rotateCounterClockwiseBtn" title="Rotacionar Anti-Hor치rio">
        <i class="fas fa-undo"></i>
        <span>Rotacionar Anti-Hor치rio</span>
    </button>
    <button id="zoomInBtn" title="Zoom In">
        <i class="fas fa-search-plus"></i>
        <span>Zoom In</span>
    </button>
    <button id="zoomOutBtn" title="Zoom Out">
        <i class="fas fa-search-minus"></i>
        <span>Zoom Out</span>
    </button>
    <button id="undoBtn" title="Desfazer">
        <i class="fas fa-undo-alt"></i>
        <span>Desfazer</span>
    </button>
</div>

<div class="canvas-container">
    <canvas id="display-image" width="800" height="600"></canvas>
</div>
{% endblock center_content %}

{% block scripts %}
<script type="module" src="{% static 'js/image_editor.js' %}"></script>
<script type="module">
    import ImageEditor from "{% static 'js/image_editor.js' %}";

    const editor = new ImageEditor('#display-image');

    document.querySelector('#newImageBtn').addEventListener('click', () => {
        editor.selectImage();
    });


    document.querySelector('#rotateClockwiseBtn').addEventListener('click', () => {
        editor.rotateClockwise();
    });

    document.querySelector('#rotateCounterClockwiseBtn').addEventListener('click', () => {
        editor.rotateCounterClockwise();
    });

    document.querySelector('#zoomInBtn').addEventListener('click', () => {
        editor.zoom(1.2);
    });

    document.querySelector('#zoomOutBtn').addEventListener('click', () => {
        editor.zoom(0.8);
    });

    document.querySelector('#undoBtn').addEventListener('click', () => {
        editor.undo();
    });
</script>
{% endblock scripts %}
