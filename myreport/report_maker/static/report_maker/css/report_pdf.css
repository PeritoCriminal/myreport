/* ==========================================================================
   Report Maker — PDF (WeasyPrint)
   Arquivo: static/report_maker/css/report_pdf.css
   Objetivo: cabeçalho/rodapé em todas as páginas + tipografia do laudo
   ========================================================================== */

/* ===========================
   PÁGINA (A4) + HEADER/FOOTER
   =========================== */

@page {
  size: A4;
  margin: 5cm 2cm 4cm 3cm;
  /* sup dir inf esq */

  @top-center {
    content: element(doc_header);
  }

  @bottom-right {
    content: element(doc_footer);
  }
}

/* Registra elementos repetidos */
.header-running {
  position: running(doc_header);
}

.footer-running {
  position: running(doc_footer);
}

/* ===========================
   BASE
   =========================== */

html,
body {
  margin: 0;
  padding: 0;
  background: #fff;
}

body {
  font-family: Arial, Helvetica, sans-serif;
  font-size: 12pt;
  line-height: 1.5;
  color: #000;
}

/* Evita “quebras feias” em títulos/figuras/cabeçalho */
h1,
h2,
h3,
.section-heading,
.object-subtitle,
.report-figure,
.report-header {
  break-inside: avoid;
}

/* ===========================
   CONTROLE DE ÓRFÃS/VIÚVAS
   (reduz 2–3 linhas soltas no fim/início de página)
   =========================== */

p,
li {
  widows: 4;
  orphans: 4;
}

/* Também ajuda em blocos de seção */
.report-section {
  break-inside: auto;
  margin: 0 0 10pt 0;
}

/* ===========================
   CABEÇALHO INSTITUCIONAL
   =========================== */

.header-running {
  padding: 0 0 8pt 0;
  margin-top: 50pt;
}

.report-header {
  width: 100%;
  border-collapse: collapse;
  table-layout: fixed;
  margin: 0 0 8pt 0;
}

.rh-img {
  width: 18mm;
  vertical-align: middle;
  text-align: center;
}

.rh-center {
  vertical-align: middle;
  text-align: center;
  padding: 0 6mm;
}

.rh-emblem {
  display: inline-block;
  width: 16mm;
  height: 16mm;
  object-fit: contain;
}

.rh-line {
  margin: 0;
  padding: 0;
  line-height: 1.1;
  word-wrap: break-word;
}

.rh-1 {
  font-size: 10pt;
  font-weight: 700;
  letter-spacing: 0.2pt;
  text-transform: uppercase;
}

.rh-2 {
  font-size: 10pt;
  font-weight: 700;
  text-transform: uppercase;
  margin-top: 2pt;
}

.rh-3 {
  font-size: 9.5pt;
  font-weight: 700;
  text-transform: uppercase;
  margin-top: 2pt;
}

.rh-4 {
  font-size: 9pt;
  font-style: italic;
  margin-top: 2pt;
}

.rh-5 {
  font-size: 9pt;
  margin-top: 2pt;
}

/* Número do laudo (ligeiramente maior) */
.report-number {
  margin-top: 8pt;
  font-size: 13pt;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.3pt;
  text-align: center;
}

/* ---------------------------
   RODAPÉ (2 linhas, à direita)
   --------------------------- */

.footer-running {
  padding: 6pt 0 0 0;
  border-top: 1px solid #000;
  font-size: 10pt;
}

.footer-running .footer-meta,
.footer-running .footer-page {
  display: block;
  text-align: right;
  line-height: 1.15;
}

.footer-running .footer-page {
  margin-top: 2pt;
}

/* "Página X de Y" */
.footer-running .page-count::before {
  content: "Página " counter(page) " de " counter(pages);
}

/* ===========================
   CONTEÚDO
   =========================== */


/* Parágrafos (inclui markdown renderizado) */
p {
  text-align: justify;
  margin: 0 0 12pt 0;
  white-space: pre-line;
}

/* Listas (markdown) */
ul,
ol {
  margin: 0 0 12pt 18pt;
  padding: 0;
}

li {
  margin: 0 0 4pt 0;
}

/* ===========================
   TÍTULOS
   =========================== */

/* ↑ sutilmente mais “respiro” antes dos títulos */
.section-heading {
  font-size: 12pt;
  font-weight: 700;
  margin: 16pt 0 8pt 0;
  /* antes 14pt */
  text-transform: uppercase;
  break-after: avoid;
}

.object-subtitle {
  font-size: 11pt;
  font-weight: 700;
  margin: 12pt 0 4pt 0;
  /* antes 10pt */
  break-after: avoid;
}

/* Headings vindos do markdown */
h1 {
  font-size: 14pt;
  font-weight: 600;
  margin: 26pt 0 10pt 0;
  /* antes 24pt */
  text-transform: uppercase;
  break-after: avoid;
}

h2 {
  font-size: 12pt;
  font-weight: 600;
  margin: 20pt 0 8pt 0;
  /* antes 18pt */
  break-after: avoid;
}

h3 {
  font-size: 11pt;
  font-weight: 600;
  margin: 14pt 0 6pt 0;
  /* antes 12pt */
  break-after: avoid;
}

/* ===========================
   FIGURAS
   =========================== */

.figure-grid {
  display: block;
}

.report-figure {
  display: block;
  text-align: center;

  /* mantém figura + legenda juntas */
  break-inside: avoid;
  page-break-inside: avoid;

  /* ↓ ajuda a evitar “2 linhas antes da figura”:
     se a figura não couber bem no fim, tende a ir para a página seguinte
     (com menos chance de sobrar só 2–3 linhas) */
  break-before: auto;
  page-break-before: auto;

  margin: 0 0 18pt 0;
}

.report-figure img {
  display: block;
  margin: 0 auto;

  /* largura máxima atual */
  max-width: 13cm;
  width: auto;

  /* ✅ controla altura máxima (evita imagem "gigante" que força quebras ruins) */
  max-height: 17cm;
  /* ajuste fino: 16.5–18cm conforme seu layout */
  height: auto;

  /* garante que a imagem se ajuste sem distorcer */
  object-fit: contain;

  border: 1px solid #222;
}

/* ↓ menor espaço entre imagem e legenda */
.report-figure figcaption {
  margin-top: 3pt;
  font-size: 11pt;
  font-style: italic;
  text-align: center;
  line-height: 1.0;
  white-space: pre-line;

  /* mantém legenda junto da figura */
  break-inside: avoid;
}

/* ===========================
   ASSINATURA DO PERITO
   =========================== */

.report-signature {
  break-before: avoid;
  margin-top: 36pt;
  text-align: right;
  line-height: 1.4;
}

.report-signature strong {
  font-weight: 700;
}

/* ===========================
   QUEBRA DE PÁGINA (opcional)
   =========================== */

.page-break {
  break-before: page;
}

/* ===========================
   LINKS LONGOS (Google Maps)
   =========================== */

a {
  word-break: break-all;
  overflow-wrap: anywhere;
  word-wrap: break-word;
}

/* ===========================
   GEO (QR + LINK sem quebrar página)
   =========================== */

.geo-block,
.geo-table,
.geo-table tr,
.geo-table td {
  break-inside: avoid;
  page-break-inside: avoid;
}

/* se não couber no fim da página, joga o bloco inteiro para a próxima */
.geo-block {
  break-before: auto;
  page-break-before: auto;
}

.geo-table {
  width: 100%;
  border-collapse: collapse;
  table-layout: fixed;
}

.geo-qr {
  width: 34mm;
  padding-right: 8pt;

  /* ✅ centraliza o QR na altura total da “linha” */
  vertical-align: middle;
  text-align: center;
}

.geo-qr-img {
  width: 30mm;
  height: 30mm;
  object-fit: contain;
  display: inline-block;
}

.geo-link {
  vertical-align: top;
}

.geo-link-title {
  font-weight: 700;
  margin: 0 0 2pt 0;
}

.geo-link-url {
  display: block;
  text-decoration: underline;

  /* ✅ deixa o link “crescer para baixo” sem estourar margem */
  overflow-wrap: anywhere;
  word-break: break-word;
}
