{# report_maker/templates/report_maker/report_text_block_form.html #}
{% extends "base.html" %}
{% load static %}

{% block title %}
  {% if object %}
    Editar texto do laudo
  {% else %}
    Novo texto do laudo
  {% endif %}
{% endblock %}

{% block content %}
<div class="container mt-4" style="max-width: 980px;">

  <div class="mb-4">
    <h4 class="mb-1">
      {% if object %}
        Editar texto do laudo
      {% else %}
        Novo texto do laudo
      {% endif %}
    </h4>

    <div class="text-muted small">
      Laudo nº {{ report.report_number }}
    </div>
  </div>

  <form method="post" novalidate>
    {% csrf_token %}

    {% if form.non_field_errors %}
      <div class="alert alert-danger">
        {{ form.non_field_errors }}
      </div>
    {% endif %}

    <div class="row">

      <div class="col-12 col-md-6 mb-3">
        {{ form.placement.label_tag }}
        {{ form.placement }}
        {{ form.placement.errors }}
      </div>

      <div class="col-12">
        {% include "report_maker/partials/text_block_editor.html" with field_name="body" label="Texto" value=form.body.value required=True rows=10 %}
        {{ form.body.errors }}
      </div>

    </div>

    <div class="d-flex justify-content-between align-items-center mt-4">
      <a href="{% url 'report_maker:textblock_list' report.pk %}"
         class="btn btn-outline-secondary">
        Cancelar
      </a>

      <div class="d-flex gap-2">
        {% if object %}
          <a href="{% url 'report_maker:textblock_delete' report.pk object.pk %}"
             class="btn btn-outline-danger">
            Excluir
          </a>
        {% endif %}

        <button type="submit" class="btn btn-primary">
          Salvar texto
        </button>
      </div>
    </div>

  </form>
</div>
{% endblock %}

{% block scripts %}
{# reservado para extensões futuras (ex.: IA) #}
{% endblock %}
