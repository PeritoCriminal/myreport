{% load static %}

<div class="card shadow-sm shelf-card">
  <img
    src="{% if doc.cover_image %}{{ doc.cover_image.url }}{% else %}{% static 'img/pdf_img.png' %}{% endif %}"
    class="card-img-top"
    alt="Capa do documento"
    style="object-fit: cover; height: 140px;"
  />

  <div class="card-body d-flex flex-column">
    <div class="mb-2">
      <div class="fw-semibold">{{ doc.title }}</div>

      {% if doc.description %}
        <div class="text-muted small clamp-3">{{ doc.description }}</div>
      {% else %}
        <div class="text-muted small">Sem descrição.</div>
      {% endif %}
    </div>

    <div class="mt-auto d-flex justify-content-between align-items-center">
      {% with version=doc.current_versions.0 %}
        {% if version %}
          <a
            href="{{ version.pdf_file.url }}"
            class="btn btn-sm btn-outline-primary"
            target="_blank"
          >
            Baixar PDF
          </a>
        {% else %}
          <span class="badge text-bg-secondary">Sem PDF</span>
        {% endif %}
      {% endwith %}
    </div>
  </div>
</div>
